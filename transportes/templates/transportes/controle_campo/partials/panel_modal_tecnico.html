<!-- Modal GenÃ©rico de TÃ©cnico -->
<div class="modal fade" id="modalTecnico" tabindex="-1" aria-labelledby="modalTecnicoLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      
      <!-- CabeÃ§alho -->
      <div class="modal-header text-white">
        <h5 class="modal-title" id="modalTecnicoLabel">
          <strong>Resumo do TÃ©cnico</strong>
        </h5>
        <button type="button" class="btn-close btn-close-black" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      
      <!-- Corpo -->
      <div class="modal-body">
        <div class="tec-ficha">
          <div class="linha">Nome:  <span class="titulo" id="modalTecNome"></span></div>
          <div class="linha">UID:  <span class="titulo" id="modalTecUid"></span></div>
          <div class="linha">Unidade: <span class="titulo" id="modalTecArea"></span></div>
          <div class="linha">Total OS: <span class="titulo" id="modalTecTotal"></span></div>
          <div class="linha">OS ConcluÃ­das: <span class="titulo" id="modalTecConcluido"></span></div>
          <div class="linha">OS No Tempo: <span class="titulo" id="modalTecNoTempo"></span></div>
          <div class="linha">OS No Limite: <span class="titulo" id="modalTecNoLimite"></span></div>
          <div class="linha">OS Atrasadas: <span class="titulo" id="modalTecAtrasado"></span></div>
          <div class="linha">Ãšltimo Login: <span class="titulo" id="modalTecLastlogin"></span></div>
          <div class="linha">Ãšltima Abertura: <span class="titulo" id="modalTecLastopening"></span></div>
          <div class="linha">Tempo Ocioso:   <span class="titulo" id="modalTecOcioso"></span></div>
          <div class="linha">
           NÃºmero:
            <span class="titulo">
              <a href="#" id="modalTecPhone" class="whatsapp-link" target="_blank"></a>
            </span>
          </div>
        </div>
      </div>

      <!-- RodapÃ© -->
      <div class="modal-footer">
       
       <!-- Dentro do modalTecnico -->
      <a href="#" id="btnVerRota" class="btn btn-sm btn-primary">Ver Rota</a>

     
   

      </div>
    </div>
  </div>
</div>




<!-- Modal: Ordem de ServiÃ§o -->
<div class="modal fade" id="modalOrdem" tabindex="-1" aria-labelledby="modalOrdemLabel" aria-hidden="true" >
  <div class="modal-dialog modal-dialog-centered modal-xl" >
    <div class="modal-content" >

      <!-- CabeÃ§alho -->
         <div class="modal-header text-white" >
        <h5 class="modal-title" id="modalTecnicoLabel" >
          <strong>Detalhes da Ordem de ServiÃ§o</strong>
        </h5>
        <button type="button" class="btn-close btn-close-black" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>

      <!-- Corpo -->
      <div class="modal-body" >
        <div class="ordem-ficha" >
        <div class="linha">Nome:  <span class="titulo" id="nome_tecnico"></span></div>

         <div class="linha">UID: <span class="titulo" id="modalUid"></span></div>
          <div class="linha" >OS: <span class="titulo" id="modalOs"></span></div>
          <div class="linha">HorÃ¡rio: <span class="titulo" id="modalHorario"></span></div>
        
          <div class="linha">EndereÃ§o: <span class="titulo" id="modalEndereco"></span></div>
          <div class="linha">Status: <span class="titulo" id="modalStatus"></span></div>
          <div class="linha">Tag: <span class="titulo" id="modalTag"></span></div>
          <div class="linha">Flag: <span class="titulo" id="modalFlag"></span></div>
            <div class="linha">Tempo Restante: <span class="titulo" id="modalTempo"></span></div>
          <div class="linha">Mensagem: <span class="titulo" id="modalMensagem"></span></div>
        </div>
      </div>

  <div class="modal-footer">
    
   

      </div>
      
    </div>
  </div>
</div>
<script>
  document.addEventListener("show.bs.modal", function (event) {
    const button = event.relatedTarget;
    if (!button) return;

    // Modal TÃ©cnico
    if (event.target.id === "modalTecnico") {
      document.getElementById("modalTecNome").textContent = button.dataset.nome || "â€”";
      document.getElementById("modalTecUid").textContent = button.dataset.uid || "â€”";
      document.getElementById("modalTecArea").textContent = button.dataset.area || "â€”";
      document.getElementById("modalTecTotal").textContent = button.dataset.total || "â€”";
      document.getElementById("modalTecConcluido").textContent = button.dataset.concluido || "â€”";
      document.getElementById("modalTecNoTempo").textContent = button.dataset.noTempo || "â€”";
      document.getElementById("modalTecNoLimite").textContent = button.dataset.noLimite || "â€”";
      document.getElementById("modalTecAtrasado").textContent = button.dataset.atrasado || "â€”";
      document.getElementById("modalTecLastlogin").textContent = button.dataset.lastlogin || "â€”";
      document.getElementById("modalTecLastopening").textContent = button.dataset.lastopening || "â€”";
      document.getElementById("modalTecOcioso").textContent = button.dataset.ocioso || "â€”";

      const phone = button.dataset.phone || "";
      const link = phone ? `https://wa.me/55${phone.replace(/\D/g, '')}` : "#";
      const phoneElement = document.getElementById("modalTecPhone");
      phoneElement.textContent = phone || "â€”";
      phoneElement.href = link;

      // ðŸ”¹ Atualiza botÃ£o "Ver Rota"
      const uid = button.dataset.uid || "";
      const rotaBtn = document.getElementById("btnVerRota");
      rotaBtn.href = `?ver_rota=${uid}`;
    }

    // Modal Ordem de ServiÃ§o
    if (event.target.id === "modalOrdem") {
    document.getElementById("nome_tecnico").textContent = button.dataset.nome;
    document.getElementById("modalOs").textContent = button.dataset.os || "â€”";
    document.getElementById("modalUid").textContent = button.dataset.uid || "â€”";
    document.getElementById("modalHorario").textContent = button.dataset.horario || "â€”";
    document.getElementById("modalTempo").textContent = button.dataset.tempo || "â€”";
    document.getElementById("modalEndereco").textContent = button.dataset.endereco || "â€”";
    document.getElementById("modalStatus").textContent = button.dataset.status || "â€”";
    document.getElementById("modalTag").textContent = button.dataset.tag || "â€”";
    document.getElementById("modalFlag").textContent = button.dataset.flag || "â€”";
    document.getElementById("modalMensagem").textContent = button.dataset.mensagem || "â€”";
}

  });
</script>
