<!-- Tabela Técnicos -->
<div class="container mt-4">
  <h4>Resumo por Técnico</h4>
  <div class="table-responsive">
    {% if tecnicos %}
    <table class="styled-table dark">
      <thead>
        <tr>
          <th>Ação</th>
          <th>Nome</th>
          <th>UID</th>
          <th>Unidade</th>
          <th>Total OS</th>
          <th>Concluído</th>
          <th>No Tempo</th>
          <th>No Limite</th>
          <th>Atrasado</th>
          <th>Último Login</th>
          <th>Última Abertura</th>
        </tr>
      </thead>
      <tbody>
        {% for t in tecnicos %}
          <tr {% if t.atraso_min > 29 %}class="alert-row"{% endif %}>
            <td>
              <a href="#"
                 data-bs-toggle="modal"
                 data-bs-target="#modalTecnico"
                 data-nome="{{ t.nome }}"
                 data-uid="{{ t.uid }}"
                 data-area="{{ t.area }}"
                 data-total="{{ t.total }}"
                 data-concluido="{{ t.concluido }}"
                 data-no-tempo="{{ t.no_tempo }}"
                 data-no-limite="{{ t.no_limite }}"
                 data-atrasado="{{ t.atrasado }}"
                 data-lastlogin="{{ t.lastlogin }}"
                 data-lastopening="{{ t.lastopening }}"
                 data-ocioso="{{ t.atraso_fmt }}"
                 data-phone="{{ t.phone }}">
                 <i class="fa-regular fa-eye"></i>
              </a>
            </td>
            <td>{{ t.nome }}</td>
            <td>{{ t.uid }}</td>
            <td>{{ t.area }}</td>
            <td>{{ t.total }}</td>
            <td>{{ t.concluido }}</td>
            <td>{{ t.no_tempo }}</td>
            <td>{{ t.no_limite }}</td>
            <td>{{ t.atrasado }}</td>
            <td>{{ t.lastlogin }}</td>
            <td>{{ t.lastopening }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="11">Nenhum técnico encontrado</td></tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </div>
</div>

<!-- Tabela Ordens Gerais -->
<div class="container mt-4">
  <h4>Ordens Atendidas</h4>
  <div class="table-responsive">
    <table class="styled-table dark">
      <thead>
        <tr>
          <th>OS</th><th>Técnico</th><th>UID</th><th>CEP</th>
          <th>Endereço</th><th>Status</th><th>Tag</th><th>Flag</th>
        </tr>
      </thead>
      <tbody>
        {% for o in ordens %}
          <tr>
            <td>{{ o.os }}</td>
            <td>{{ o.nome_tecnico }}</td>
            <td>{{ o.uid }}</td>
            <td>{{ o.cep }}</td>
            <td>{{ o.endereco }}</td>
            <td>{{ o.status_janela }}</td>
            <td>{{ o.tag }}</td>
            <td>{{ o.flag }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="8">Nenhuma ordem encontrada</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Tabela Ordens Detalhadas -->
<div class="container mt-4">
  <h4>Ordens Detalhadas por Técnico</h4>
  <div class="table-responsive">
    <table class="styled-table dark">
      <thead>
        <tr>
          <th>OS</th><th>Técnico</th><th>CEP</th><th>Endereço</th>
          <th>Bairro</th><th>Cidade</th><th>Status</th><th>Tag</th>
        </tr>
      </thead>
      <tbody>
        {% for o in ordens_os %}
          <tr>
            <td>{{ o.os }}</td>
            <td>{{ o.nome_tecnico }}</td>
            <td>{{ o.cep }}</td>
            <td>{{ o.endereco }} {{ o.numero }}</td>
            <td>{{ o.bairro }}</td>
            <td>{{ o.cidade }}/{{ o.uf }}</td>
            <td>{{ o.status_janela }}</td>
            <td>{{ o.tag }}</td>
          </tr>
        {% empty %}
          <tr><td colspan="8">Nenhuma ordem detalhada encontrada</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
