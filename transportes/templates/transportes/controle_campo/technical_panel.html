{% extends 'global/base.html' %}
{% block content %}
{% load query_filters %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<div style="margin-top:65px; margin-left:98px">

</div>



  {% include 'transportes/controle_campo/partials/panel_cards.html' %}
  {% include 'transportes/controle_campo/partials/panel_modal_tecnico.html' %}



<div class="setcontainer" {% if filtro_ativo or ver_rota_uid %}style="display:none"{% endif %}>
   
  <br>

  {# Botão limpar unidade #}
 

<br>
 <div class="d-flex flex-wrap gap-2 mb-3">

    {% if filtro_unidade %}
      <a href="{% query_update unidade='' %}" class="btn btn-outline-danger btn-sm">
        Limpar Filtro
      </a>
    {% endif %}

    {% if ocultar_sem_nome %}
      <a href="?ocultar_sem_nome=0" class="btn btn-sm btn-secondary">
        Mostrar todos
      </a>
    {% else %}
      <a href="?ocultar_sem_nome=1" class="btn btn-sm btn-primary">
        Ocultar sem nome
      </a>
    {% endif %}
  </div>

  <!-- Busca -->
  <form method="get" class="d-flex align-items-center mb-3">
  <input 
    type="text" 
    name="search" 
    class="form-control form-control-sm me-2" 
    placeholder="Buscar técnico por nome ou uid..." 
    value="{{ search|default:'' }}"

    ><button type="submit" class="btn btn-primary btn-xs">
  <i class="fa fa-search"></i>
</button>
</form>
</form >
<br>

  {# Cards de unidade #}
  <div class="container unidade-filter mt-2">
    <div class="row">
      {% for u in unidades %}
        <div class="col-10 col-md-3 mb-2">
          <a href="{% query_update unidade=u %}"
             class="unidade-card {% if filtro_unidade == u %}active{% endif %}">
            <i class="fa-regular fa-building unidade-icon"></i>
            <span class="unidade-text">{{ u }}</span>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>



  
</div >




  {% include 'transportes/controle_campo/partials/panel_tables.html' %}


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
