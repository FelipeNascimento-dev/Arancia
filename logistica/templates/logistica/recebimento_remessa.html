{% extends 'global/base.html' %}

{% block content %}

<style>
    .form-card-2col {
        height: auto;
        margin-top: 65px;
    }
</style>

<div class="form-container">
    <div class="form-card-2col" action="{{ form_action }}" method="POST">
        <form method="POST">
            {% include 'global/partials/_form_2col.html' %}
        </form>
    </div>
</div>

{% if boxcodes %}

{% endif %}

<script>
    (function () {
        const MAP = JSON.parse('{{ depositos_map_json|escapejs }}');

        function fill(select, options) {
            select.innerHTML = '';
            select.add(new Option('', ''));
            (options || []).forEach(function (item) {
                select.add(new Option(item[1], item[0]));
            });
        }

        function wirePair(idCentro, idDeposito) {
            const c = document.getElementById(idCentro);
            const d = document.getElementById(idDeposito);
            if (!c || !d) return;

            if (!c.value) {
                d.disabled = true;
            }

            c.addEventListener('change', function () {
                fill(d, MAP[c.value]);
                d.disabled = !c.value;
                d.value = '';
            });

            if (c.value) {
                fill(d, MAP[c.value]);
                d.disabled = false;
            }
        }

        wirePair('id_distribution_center', 'id_ware_house_code');
    })();
</script>

{% endblock content %}